<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="robots" content="INDEX,FOLLOW">
<meta name="author" content="UKADOC Project">
<meta name="keywords" content="ukadoc,ukagaka">
<title>UKADOC Project PLUGIN/2.0</title>
<link rel="stylesheet" href="spec.css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
</head>
<body>
	<h1 id="page-title">PLUGIN/2.0</h1>
	<nav class="menu-header">
		<table>
			<tbody>
				<tr>
					<th>Return to top page</th>
					<td colspan="2">
						<ul>
							<li><a href="https://ukagakadreamteam.github.io/ukadoc/manual/index.html">INDEX</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="6">Settings files</th>
					<th>Ghost</th>
					<td>
						<ul>
							<li><a href="./descript_ghost.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Shell</th>
					<td>
						<ul>
							<li><a href="./descript_shell.html">descript.txt</a></li>
							<li><a href="./descript_shell_surfaces.html">surfaces.txt</a></li>
							<li><a href="./descript_shell_surfacetable.html">surfacetable.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Balloon</th>
					<td>
						<ul>
							<li><a href="./descript_balloon.html">descript.txt</a></li>
							<li><a href="./descript_balloon.html#balloonsoption">balloon(s/k)*s.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Plugin</th>
					<td>
						<ul>
							<li><a href="./descript_plugin.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Headline</th>
					<td>
						<ul>
							<li><a href="./descript_headline.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Install</th>
					<td>
						<ul>
							<li><a href="./descript_install.html">install.txt</a></li>
							<li><a href="./descript_install.html#delete.txt">delete.txt</a></li>
							<li><a href="./descript_install.html#developer_options.txt">developer_options.txt</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th>SakuraScript</th>
					<td colspan="2">
						<ul>
							<li><a href="./list_sakura_script.html">Sakura Script</a></li>
							<li><a href="./list_propertysystem.html">Property System</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="2">Events</th>
					<th>SHIORI</th>
					<td>
						<ul>
							<li><a href="./list_shiori_event.html">SHIORI Event</a></li>
							<li><a href="./list_shiori_event_ex.html">SHIORI Event (External)</a></li>
							<li><a href="./list_shiori_resource.html">SHIORI Resource</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>PLUGIN</th>
					<td>
						<ul>
							<li><a href="./list_plugin_event.html">PLUGIN Event</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th>Standards</th>
					<td colspan="2">
						<ul>
							<li><a href="./spec_shiori3.html">SHIORI/3.0</a></li>
							<li><a href="./spec_sstp.html">SSTP/1.x</a></li>
							<li><a href="http://www.boreas.dti.ne.jp/~sdn/saori.html">SAORI/1.0</a> (External site)</li>
							<li><a href="./spec_plugin.html">PLUGIN/2.0</a></li>
							<li><a href="./spec_headline.html">HEADLINE/2.0</a></li>
							<li><a href="./spec_dll.html">DLL</a></li>
							<li><a href="./spec_fmo_mutex.html">FMO/MUTEX</a></li>
							<li><a href="./spec_web.html">Web-related</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
		</table>
	</nav>
	<section class="navigation-bar">
		<h1>PLUGIN/2.0</h1>
		<section class="navigation-category">
			<h1>PLUGIN/2.0</h1>
			<ul>
				<li><a href="#chapter0">Preface</a></li>
				<li><a href="#chapter1">Version design philosophy and impact assessment</a></li>
				<li><a href="#chapter2">entity</a></li>
				<li><a href="#chapter3">DLL</a></li>
				<li><a href="#chapter4">request provisions</a></li>
				<li><a href="#chapter5">response provisions</a></li>
				<li><a href="#chapter6">Plugin ID</a></li>
				<li><a href="#chapter7">descript.txt</a></li>
				<li><a href="#chapter8">Ghost side extension</a></li>
			</ul>
		</section>
	</section>
	<div class="text">
		<section class="caption" id="notes_translation">
			<h1>Translated Document</h1>
			<div class="passage">
				<li>This document has been translated from the original Japanese by members of the Ukagaka Dream Team community.</li>
				<li>To see the original document, click <a href="http://ssp.shillest.net/ukadoc/manual/spec_plugin.html">here</a>.</li>
				<li>To submit corrections/updates, see <a href="https://github.com/Ukagaka-Dream-Team/ukadoc">our repository</a> to open an issue or find where to contact us.</li>
			</div>
		</section>
		<div class="caption">
			<p>Last modified: <time>2013-08-10</time></p>
		</div>
		<div class="caption">
			<p>Reference: <a href="http://usada.sakura.vg/contents/plugin.html">PLUGIN/1.0</a> (External site)</p>
		</div>
		<section id="chapter0">
			<h1>Preface</h1>
			<p>PLUGIN/2.0 is a revision of the old specification (1.0), implemented in SSP.</p>
			<p>This standard is under development and is subject to significant changes.</p>
		</section>
		<section id="chapter1">
			<h1>Version design philosophy and impact assessment</h1>
			<section>
				<h1>Design concept</h1>
				<p>The SAORI group will be modified so that users can easily communicate with the main unit and ghosts, and the "convenience functions" that have been dispersed among the ghosts will be integrated to improve convenience for users.</p>
				<p>It would be better to shift the burden from the plugin developer to the execution environment... maybe.</p>
			</section>
			<section>
				<h1>Processing system</h1>
				<p>Please be prepared as this assumes that various burdens will be transferred to the processing system. (bitter smile)</p>
			</section>
			<section>
				<h1>Plugin author</h1>
				<p>Since a new request export is defined for the call, there is no need to consider conflicts with PLUGIN/1.0.</p>
				<p>Notifying ghosts of scripts, events, etc. becomes very easy.</p>
			</section>
			<section>
				<h1>Ghost author</h1>
				<p>Even if a particular plugin is not supported, it is not fatal because of the default script specification (see below).</p>
				<p>If you really don't want the default script to ruin the atmosphere, let's deal with it...</p>
			</section>
			<section>
				<h1>Version impact assessment</h1>
				<p>It's convenient and easy to use because you can handle a small group of functions for each ghost all at once.</p>
			</section>
		</section>
		<section id="chapter2">
			<h1>entity</h1>
			<p>Two files are required: a configuration file "descript.txt" and a dll file.</p>
		</section>
		<section id="chapter3">
			<h1>DLL</h1>
			<p>See the <a href="spec_dll.html">DLL page</a>.</p>
			<p><em>※YAYA/KAWARI as PLUGIN users and module authors can skip this section.</em></p>
		</section>
		<section id="chapter4">
			<h1>request provisions</h1>
			<p>A typical example of a request is as follows. ※Line feed vode = CR+LF</p>
<pre><code>GET PLUGIN/2.0
ID: OnGhostChange
Charset: UTF-8
Reference0: 54
</code></pre>
<pre><code>NOTIFY PLUGIN/2.0
ID: OnMenuExec
Charset: UTF-8
Sender: Crystallite
Reference0: 17982
</code></pre>
			<p>Terminate with a blank line. Note that, as with other DLL specifications, it is not necessarily zero-terminated.</p>
			<p>The PLUGIN/2.0 format basically follows the SHIORI/3.0 specification.<br />It consists of an ID header, which is an event identifier, and a Reference header, which is an arbitrary number (8 or more) of additional information.<br />The contents of the Reference will vary depending on the ID.</p>
			<p>If you want to include newlines in the contents of References, etc., or if you want to specify that they must be included, it is *strongly recommended* (though not a specification) that you specify that only the characters you want to avoid are URL-encoded such as %8f%73.</p>
			<p>The contents of Sender will be the name of the ghost when invoked, according to the calling specifications from the ghost side described later.<br />When called from the main side, the Sender header itself will disappear or an empty string will be assigned.<br />Note that it does not include "the name of the main unit (SSP, CROW, etc.) like SHIORI.</p>
			<p>See the <a href="list_plugin_event.html">PLUGIN Event page</a> for the type of request (ID) that will be notified.</p>
		</section>
		<section id="chapter5">
			<h1>response provisions</h1>
			<p>An example response is shown below. ※Line feed code = CR+LF</p>
<pre><code><!--
-->PLUGIN/2.0 200 OK
Charset: Shift_JIS
Target: 54
Event: OnResourceLow
EventOption: notify
Reference0: 19
Reference1: 31
Reference2: 65
Script: Script~
ScriptOption: nobreak,notranslate
</code></pre>
			<p>※Only for processing systems that support multiple launches※ If there is a ghost that matches the Target among the currently running ghosts, it will be processed by that ghost.<br />If "__SYSTEM_ALL_GHOST__" is specified, "all running ghosts" will be notified.</p>
			<p>If not applicable, or if nothing is specified, an appropriate ghost will process it depending on the system.<br />In addition, if called using the call specifications from the ghost side described below, it will return to the calling ghost unless explicitly specified in the Target header.</p>
			<p>※In a processing system that does not support it, there is only one ghost in the first place, so that ghost will be called every time.</p>
			<section>
				<h1>Event/Reference</h1>
				<p>The Event and Reference headers are events sent to the ghost side.<br />If the ghost does not respond to this, the default script, the Script header, is played.</p>
			</section>
			<section>
				<h1>ScriptOption</h1>
				<p>ScirptOption is an option specification that applies only to Script header content.</p>
				<dl>
					<dt>notranslate</dt>
					<dd>Don't go through ghost translation.</dd>
					<dt>nobreak</dt>
					<dd>Execute the specified script after the end of the current talk, without interrupting.</dd>
				</dl>
			</section>
			<section>
				<h1>EventOption</h1>
				<p>EventOption is an optional specification that applies only to Event header content.</p>
				<dl>
					<dt>notify</dt>
					<dd>Notify ghosts of specified events via notify</dd>
				</dl>
			</section>
			<p>Event, EventOption, Reference, Target, Script, and ScriptOption are all optional.<br />For example, if you only want to send events and do not need the default script, omit the Script/ScriptOption header.<br />※If you only want to send the script, the opposite is true.</p>
		</section>
		<section id="chapter6">
			<h1>Plugin ID</h1>
			<p>See the <a href="descript_plugin.html#id,ID">ID section of the Plugin Settings</a>.
		</section>
		<section id="chapter7">
			<h1>descript.txt</h1>
			<p>See the <a href="descript_plugin.html">Plugin Settings page</a>.</p>
		</section>
		<section id="chapter8">
			<h1>Ghost side extension</h1>
			<section>
				<h1>Script extensions</h1>
<pre><code><!--
-->\![raiseplugin,(Plugin name or ID),(Event),Reference0...]
\![notifyplugin,(Plugin name or ID),(Event),Reference0...]
</code></pre>
				<p>Sends the specified event to the specified plugin. Unless a target is specified on the plugin side (system_any), the response from the plugin is preferentially assigned to the ghost that executed raiseplugin, so it can be used in a similar way to SAORI.</p>
				<p>The send command is GET in the case of <a href="list_sakura_script.html#_!_raiseplugin,plugin_ID_or_plugin_name,event_name,r0,r1,r2..._">\![raiseplugin]</a>, and NOTIFY in the case of <a href="list_sakura_script.html#_!_notifyplugin,plugin_ID_or_plugin_name,event_name,r0,r1,r2..._">\![notifyplugin]</a>.</p>
			</section>
			<section>
				<h1>SHIORI Event extension</h1>
				<p>See the <a href="list_shiori_event.html#installedplugin">installedplugin section</a>.</p>
			</section>
		</section>
	</div>
</body>
</html>
