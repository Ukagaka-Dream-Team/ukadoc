<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="robots" content="INDEX,FOLLOW">
<meta name="author" content="UKADOC Project">
<meta name="keywords" content="ukadoc,伺か">
<title>UKADOC Project Shell設定 - surfaces.txt</title>
<link rel="stylesheet" href="list.css" />
<!--[if lt IE 9]><script src="html5shiv.js" charset="Shift_JIS"></script><![endif]-->
</head>
<body>
	<h1 id="page-title">Shell設定 - surfaces.txt</h1>
	<nav class="menu-header">
		<table>
			<tbody>
				<tr>
					<th>トップページへ戻る</th>
					<td colspan="2">
						<ul>
							<li><a href="http://ssp.shillest.net/ukadoc/manual/index.html">INDEX</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="6">設定ファイル</th>
					<th>Ghost</th>
					<td>
						<ul>
							<li><a href="./descript_ghost.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Shell</th>
					<td>
						<ul>
							<li><a href="./descript_shell.html">descript.txt</a></li>
							<li><a href="./descript_shell_surfaces.html">surfaces.txt</a></li>
							<li><a href="./descript_shell_surfacetable.html">surfacetable.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Balloon</th>
					<td>
						<ul>
							<li><a href="./descript_balloon.html">descript.txt</a></li>
							<li><a href="./descript_balloon.html#balloonsoption">balloon(s/k)*s.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Plugin</th>
					<td>
						<ul>
							<li><a href="./descript_plugin.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Headline</th>
					<td>
						<ul>
							<li><a href="./descript_headline.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Install</th>
					<td>
						<ul>
							<li><a href="./descript_install.html">install.txt</a></li>
							<li><a href="./descript_install.html#delete.txt">delete.txt</a></li>
							<li><a href="./descript_install.html#developer_options.txt">developer_options.txt</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th>さくらスクリプト</th>
					<td colspan="2">
						<ul>
							<li><a href="./list_sakura_script.html">Sakura Script</a></li>
							<li><a href="./list_propertysystem.html">Property System</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="2">イベント</th>
					<th>SHIORI</th>
					<td>
						<ul>
							<li><a href="./list_shiori_event.html">SHIORI Event</a></li>
							<li><a href="./list_shiori_event_ex.html">SHIORI Event（外部）</a></li>
							<li><a href="./list_shiori_resource.html">SHIORI Resource</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>PLUGIN</th>
					<td>
						<ul>
							<li><a href="./list_plugin_event.html">PLUGIN Event</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th>規格</th>
					<td colspan="2">
						<ul>
							<li><a href="./spec_shiori3.html">SHIORI/3.0</a></li>
							<li><a href="./spec_sstp.html">SSTP/1.x</a></li>
							<li><a href="http://www.boreas.dti.ne.jp/~sdn/saori.html">SAORI/1.0</a>（外部サイト）</li>
							<li><a href="./spec_plugin.html">PLUGIN/2.0</a></li>
							<li><a href="./spec_headline.html">HEADLINE/2.0</a></li>
							<li><a href="./spec_dll.html">DLL</a></li>
							<li><a href="./spec_fmo_mutex.html">FMO/MUTEX</a></li>
							<li><a href="./spec_web.html">Web関連</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
		</table>
	</nav>
	<section class="navigation-bar">
		<h1>Shell - surfaces.txt</h1>
		<section class="navigation-category">
			<ul>
				<li class="caption introduction"><a href="#introduction_surfaces.txt">surfaces.txt</a></li>
			</ul>
		</section>
		<section class="navigation-category">
			<ul>
				<li><a href="#charset,文字コード-surfaces">charset,文字コード</a></li>
			</ul>
		</section>
		<section class="navigation-category">
			<h1>descriptブレス</h1>
			<ul>
				<li class="caption introduction"><a href="#introduction_descriptbrace">descriptブレス記述例</a></li>
			</ul>
			<ul>
				<li><a href="#version,*">version,*</a></li>
				<li><a href="#maxwidth,ピクセル">maxwidth,ピクセル</a></li>
				<li><a href="#collision-sort,ソート順序">collision-sort,ソート順序</a></li>
				<li><a href="#animation-sort,ソート順序">animation-sort,ソート順序</a></li>
			</ul>
		</section>
		<section class="navigation-category">
			<h1>surfaceブレス</h1>
			<ul>
				<li class="caption introduction"><a href="#introduction_surfacebrace">surfaceブレス記述例</a></li>
				<li class="caption introduction"><a href="#introduction_seriko">アニメーション(SERIKO)</a></li>
				<li class="caption introduction"><a href="#introduction_mayuna">着せ替え(MAYUNA)</a></li>
				<li class="caption"><a href="#caption_seriko-redefine">SERIKOの旧定義と新定義について</a></li>
				<li class="caption"><a href="#caption_surfacebraceID">surface*ブレスで可能なID指定</a></li>
				<li class="caption"><a href="#caption_surface.append">surface*ブレスとsurface.append*ブレス</a></li>
				<li class="caption"><a href="#caption_basesurface">ベースサーフェス</a></li>
				<li class="caption"><a href="#caption_z-axis">各要素の上下構造</a></li>
				<li class="caption"><a href="#caption_standarddef">サーフェスIDの割り振り</a></li>
			</ul>
			<ul>
				<li><a href="#element*,描画メソッド,ファイル名,X座標,Y座標">element*,描画メソッド,ファイル名,X座標,Y座標</a></li>
				<li><a href="#animation*.interval,インターバル">animation*.interval,インターバル</a></li>
				<li><a href="#animation*.pattern*,描画メソッド,サーフェスID,ウェイト,X座標,Y座標">animation*.pattern*,描画メソッド,サーフェス番号,ウェイト,X座標,Y座標</a></li>
				<li><a href="#animation*.option,exclusive">animation*.option,exclusive</a></li>
				<li><a href="#animation*.option,background">animation*.option,background</a></li>
				<li><a href="#animation*.option,shared-index">animation*.option,shared-index</a></li>
				<li><a href="#animation*.option,オプション">animation*.option,オプション</a></li>
				<li><a href="#animation*.collision*,当たり判定定義animation*.collisionex*,当たり判定定義(ex)">animation*.collision*,当たり判定定義animation*.collisionex*,当たり判定定義(ex)</a></li>
				<li><a href="#collision*,始点X,始点Y,終点X,終点Y,ID">collision*,始点X,始点Y,終点X,終点Y,ID</a></li>
				<li><a href="#collisionex*,ID,タイプ,座標1,座標2...">collisionex*,ID,タイプ,座標1,座標2...</a></li>
				<li><a href="#_2_sakura.balloon.offsetx,座標">sakura.balloon.offsetx,座標</a></li>
				<li><a href="#_2_sakura.balloon.offsety,座標">sakura.balloon.offsety,座標</a></li>
				<li><a href="#_2_kero.balloon.offsetx,座標">kero.balloon.offsetx,座標</a></li>
				<li><a href="#_2_kero.balloon.offsety,座標">kero.balloon.offsety,座標</a></li>
				<li><a href="#_2_balloon.offsetx,座標">balloon.offsetx,座標</a></li>
				<li><a href="#_2_balloon.offsety,座標">balloon.offsety,座標</a></li>
				<li><a href="#point.centerx,座標">point.centerx,座標</a></li>
				<li><a href="#point.centery,座標">point.centery,座標</a></li>
				<li><a href="#point.kinoko.centerx,座標">point.kinoko.centerx,座標</a></li>
				<li><a href="#point.kinoko.centery,座標">point.kinoko.centery,座標</a></li>
				<li><a href="#point.basepos.x,座標">point.basepos.x,座標</a></li>
				<li><a href="#point.basepos.y,座標">point.basepos.y,座標</a></li>
			</ul>
			<section>
				<h1>アニメーションインターバル</h1>
				<ul>
					<li class="caption introduction"><a href="#introduction_animationinterval">アニメーションインターバル</a></li>
				</ul>
				<ul>
					<li><a href="#sometimes">sometimes</a></li>
					<li><a href="#rarely">rarely</a></li>
					<li><a href="#random,数値">random,数値</a></li>
					<li><a href="#periodic,数値">periodic,数値</a></li>
					<li><a href="#always">always</a></li>
					<li><a href="#runonce">runonce</a></li>
					<li><a href="#never">never</a></li>
					<li><a href="#yen-e">yen-e</a></li>
					<li><a href="#talk,数値">talk,数値</a></li>
					<li><a href="#_1_bind">bind</a></li>
				</ul>
			</section>
			<section>
				<h1>描画メソッド</h1>
				<ul>
					<li class="caption introduction"><a href="#introduction_drawmethod">描画メソッド</a></li>
				</ul>
				<ul>
					<li><a href="#base">base</a></li>
					<li><a href="#overlay">overlay</a></li>
					<li><a href="#overlayfast">overlayfast</a></li>
					<li><a href="#overlaymultiply">overlaymultiply</a></li>
					<li><a href="#replace">replace</a></li>
					<li><a href="#interpolate">interpolate</a></li>
					<li><a href="#asis">asis</a></li>
					<li><a href="#move">move</a></li>
					<li><a href="#_2_bind">bind</a></li>
					<li><a href="#add">add</a></li>
					<li><a href="#reduce">reduce</a></li>
					<li><a href="#insert,ID">insert,ID</a></li>
					<li><a href="#start,ID">start,ID</a></li>
					<li><a href="#stop,ID">stop,ID</a></li>
					<li><a href="#alternativestart,_ID1,ID2..._">alternativestart,(ID1,ID2...)</a></li>
					<li><a href="#alternativestop,_ID1,ID2..._">alternativestop,(ID1,ID2...)</a></li>
					<li><a href="#parallelstart,_ID1,ID2..._">parallelstart,(ID1,ID2...)</a></li>
					<li><a href="#parallelstop,_ID1,ID2..._">parallelstop,(ID1,ID2...)</a></li>
				</ul>
			</section>
		</section>
		<section class="navigation-category">
			<h1>surface.aliasブレス</h1>
			<ul>
				<li class="caption introduction"><a href="#introduction_surface.aliasbrace">surface.aliasブレス記述例</a></li>
				<li class="caption"><a href="#caption_aliastxt">alias.txt</a></li>
			</ul>
			<ul>
				<li><a href="#*,_*_">*,[*]</a></li>
			</ul>
		</section>
		<section class="navigation-category">
			<h1>cursorブレス</h1>
			<ul>
				<li class="caption introduction"><a href="#introduction_cursorbrace">cursorブレス記述例</a></li>
			</ul>
			<ul>
				<li><a href="#mouseup*,当たり判定ID,ファイル名">mouseup*,当たり判定ID,ファイル名</a></li>
				<li><a href="#mousedown*,当たり判定ID,ファイル名">mousedown*,当たり判定ID,ファイル名</a></li>
				<li><a href="#mousewheel*,当たり判定ID,ファイル名">mousewheel*,当たり判定ID,ファイル名</a></li>
				<li><a href="#mousehover*,当たり判定ID,ファイル名">mousehover*,当たり判定ID,ファイル名</a></li>
			</ul>
			<section>
				<h1>システムカーソル</h1>
				<ul>
					<li><a href="#system:arrow">system:arrow</a></li>
					<li><a href="#system:cross">system:cross</a></li>
					<li><a href="#system:no">system:no</a></li>
					<li><a href="#system:hand">system:hand</a></li>
					<li><a href="#system:grip">system:grip</a></li>
					<li><a href="#system:finger">system:finger</a></li>
					<li><a href="#system:wait">system:wait</a></li>
					<li><a href="#system:text">system:text</a></li>
					<li><a href="#system:move">system:move</a></li>
					<li><a href="#system:help">system:help</a></li>
				</ul>
			</section>
		</section>
		<section class="navigation-category">
			<h1>tooltipブレス</h1>
			<ul>
				<li class="caption introduction"><a href="#introduction_tooltipbrace">tooltipブレス記述例</a></li>
			</ul>
			<ul>
				<li><a href="#当たり判定名,表示内容">当たり判定名,表示内容</a></li>
			</ul>
		</section>
	</section>
	<div class="categories">
		<section class="caption introduction" id="introduction_surfaces.txt">
			<h1>surfaces.txt</h1>
			<section>
				<h1>概要</h1>
				<p>
					シェルの各種定義を行うためのファイル。基本的に全て省略可。必要なものだけ書く。
					<br>例えば各サーフェス（表情・パーツ・コマ・着せ替えパーツ）へのアニメーション、当り判定、画像の合成などの設定はここで行う。
					<br>またサーフェスIDに対して別名（エイリアス）を与えたい場合もここで設定できる。
					<br>SSPではその他にも、当り判定にカーソルを乗せ続けた時に表示されるツールチップや、カーソル表示の変更などの設定も行える。
				</p>
				<p>
					一方で、シェル名、シェル作者名などのシェルの基本情報に関する設定や、着せ替えのオーナードローメニュー（右クリックメニュー）の表示設定などはここではなく<a href="descript_shell.html">descript.txt</a>で行うので注意。
				</p>
			</section>
			<section>
				<h1>基本の書式</h1>
				<p>基本的にほとんどの設定が<em>省略可能</em>であり、必要に応じて各設定を行えばよい。</p>
				<p>設定は、書くとすれば必ず一行目に書く必要がある<a href="#charset,文字コード-surfaces">charset</a>の他は、それぞれ「{」と「}」で囲まれた各ブレス内に記述する（各ブレスについてはこのページ内のそれぞれの項目参照）。</p>
				<p>「{」および「}」はそれのみが書かれた行として存在する必要があり、例えば「surface1 {」のようにブレス名に続けて書く事はできない。</p>
<pre><code>ブレス名
{
// 設定内容
}
</code></pre>
				<p>ブレス名、{}、各設定として認識されない行はすべてコメント行として扱われる。慣例的には行頭を「//」から始める。</p>
				<p>各行インデント可。</p>
				<p>SSPのみ「surfaces***.txt（***は任意の文字列）」という名前のテキストファイルは全て読み込まれ、surfaces.txtと同様に扱われる。読み込み対象となるファイルが複数ある場合、読み込まれる順序はファイル名順となる。</p>
				<p>なお、複数のsurfaces***.txtを用意した場合、<a href="#introduction_descriptbrace">descriptブレス</a>の設定（および<a href="#charset,文字コード-surfaces">charset</a>）はそれぞれのファイルに設定する必要がある（逆に言うとそれぞれのファイルで異なる設定が可能）。</p>
			</section>
			<section>
				<h1>記述例</h1>
<pre><code>charset,Shift_JIS

descript
{
version,1
}

surface0
{
animation0.interval,sometimes
animation0.pattern0,overlay,101,100,168,67
animation0.pattern1,overlay,100,100,168,67
animation0.pattern2,overlay,101,100,168,67
animation0.pattern3,overlay,-1,100,168,67
}

surface1
{
element0,overlay,body0.png,0,0
element1,overlay,face1.png,0,0
}

surface10
{
collision0,40,56,95,90,Head

sakura.balloon.offsetx,80
sakura.balloon.offsety,-100
kero.balloon.offsetx,-30
kero.balloon.offsety,20
}

// SSPのみで有効な記法 ←このようにコメント行は//から始める
surface.append0-9
{
collision0,188,25,252,63,Head
collision1,190,92,236,118,Face
collision2,180,191,220,222,Bust
collision3,154,311,248,362,Skirt
}

</code></pre>
			</section>
		</section>
		<section class="category">
			<h1>surfaces.txt または surfaces**.txt(SSPのみ)</h1>
			<dl id="charset,文字コード-surfaces">
				<dt class="entry">charset,文字コード</dt>
				<dd class="entry">
					<p>表示する文字コード。旧い環境との互換性を考慮する場合はShift_JIS、それ以外はUTF-8を推奨。</p>
					<p>SSPにおいて複数の<a href="#introduction_surfaces.txt">surfaces***.txtを用意</a>した場合はそれぞれのファイルに設定する必要がある（逆に言うとそれぞれのファイルで異なる設定が可能）。</p>
					<p class="default">(OSの標準設定またはSSP->国際化->省略時の文字コード->テキスト定義)</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
		</section>
		<section class="category">
			<h1>descriptブレス</h1>
			<section class="caption introduction" id="introduction_descriptbrace">
				<h1>descriptブレス記述例</h1>
				<p>SSPで複数の<a href="#introduction_surfaces.txt">surfaces***.txtを用意</a>した場合はそれぞれのファイルに設定する必要がある（逆に言うとそれぞれのファイルで異なる設定が可能）。</p>
<pre><code>descript
{
version,1
collision-sort,ascend
animation-sort,ascend
}
</code></pre>
			</section>
			<dl id="version,*">
				<dt class="entry">version,*</dt>
				<dd class="entry">
					<p>使用する<a href="#caption_seriko-redefine">SERIKO定義の書式</a>のバージョン指定。0でSERIKO/1.x系書式（旧定義）、1でSERIKO/2.0書式。</p>
					<p class="default">0</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="maxwidth,ピクセル">
				<dt class="entry">maxwidth,ピクセル</dt>
				<dd class="entry">
					<p>※SSPでは自動的に検出されるためこの情報は利用されない。<br>サーフェスの最大幅。単位はピクセル。重なり判定などで利用される。</p>
					<p class="default">定義なし/SSPでは実際のsurface定義における最大横幅</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="collision-sort,ソート順序">
				<dt class="entry">collision-sort,ソート順序</dt>
				<dd class="entry">
					<p>当たり判定の判定順ソート。手前から奥にどの順で表示するか。<br> ascendで昇順(1,2,3...) descendで降順(10,9,8...)</p>
					<p class="default">none（IDによらず先に書かれている方が手前）</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation-sort,ソート順序">
				<dt class="entry">animation-sort,ソート順序</dt>
				<dd class="entry">
					<p>アニメーションID表示順ソート。手前から奥にどの順で表示するか。<br> ascendで昇順(1,2,3...) descendで降順(10,9,8...)</p>
					<p class="default">descend</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
		</section>
		<section class="category">
			<h1>surfaceブレス</h1>
			<section class="caption introduction" id="introduction_surfacebrace">
				<h1>surfaceブレス記述例</h1>
<pre><code>surface1
{
element0,overlay,body0.png,0,0
element1,overlay,face0.png,0,0

collision0,188,25,252,63,Head
collision1,190,92,236,118,Face
collision2,180,191,220,222,Bust
collision3,154,311,248,362,Skirt

animation0.interval,sometimes
animation0.pattern0,overlay,101,100,168,67
animation0.pattern1,overlay,100,100,168,67
animation0.pattern2,overlay,101,100,168,67
animation0.pattern3,overlay,-1,100,168,67
}
</code></pre>
				<p>SSPのみ追加指定（すでに定義済みのものに対してさらに定義を後付けする）用記法surace.appendがある。<br>詳細は<a href="#caption_surface.append">後述</a>。</p>
<pre><code>surface.append1-9,20-29
{
// 略（ふつうのsurfaceブレスと同様）
}
</code></pre>
				<p>surface(.append)*の*部分に、サーフェスIDとなる数字を指定。複数指定、範囲指定が可能（<a href="#caption_surfacebraceID">後述</a>）。</p>
				<p>なおそれ以外の各行の数字部分については各定義の説明参照。</p>
			</section>
			<section class="caption introduction" id="introduction_seriko">
				<h1>アニメーション（SERIKO）</h1>
				<section>
					<h1>概要</h1>
					<p>伺かのシェルはアニメーション機能を持つ。これは静止画像であるコマを連続的に描画することによって動画的表現を行うものである。</p>
					<p>アニメーションは各サーフェスに対して設定される。そしてアニメーションの各コマとして用いる画像もまた別のサーフェスである。このときコマとして参照された側がまたさらにアニメーション定義を持っていたとしても、普通それは無視される（ただしSSPに限り、多重着せ替えと言う仕組みがある。<a href="#introduction_mayuna">着せ替え</a>の節参照）。</p>
					<p>各サーフェスへの設定では、アニメーション自体をいつ開始するか、各コマにどのサーフェスを使い、どのような方法・時間間隔で描画するかといった内容を定義する必要がある。</p>
					<p>なお、surfaces.txtにおける一連のアニメーションに関する仕様にはSERIKOという名前が与えられている。</p>
				</section>
				<section>
					<h1>基本書式と記述例</h1>
<pre><code>
surface0
{
// 瞬き
animation0.interval,rarely
animation0.pattern0,overlay,101,700,200,100
animation0.pattern1,overlay,102,700,200,100
animation0.pattern2,overlay,101,700,200,100
animation0.pattern3,overlay,-1,700,0,0

// トークに合わせて口を動かす
animation10.interval,talk,2
animation10.pattern0,overlay,200,700,200,120
animation10.pattern1,overlay,201,700,200,120
animation10.pattern2,overlay,202,700,200,120
animation10.pattern3,overlay,-1,700,0,0
}
</code></pre>
					<p>surfaces.txtにおけるアニメーションの定義は、例えば以上のようになる。</p>
					<p>上記では、surface0に対して「瞬き」「トークに合わせて口を動かす」の2つアニメーションを定義している。</p>
					<p>全てのアニメーション定義はinterval定義とpattern定義を含んでいる。他にオプション定義や、SSPの場合はアニメーション専用の触り判定定義もあるが、それらが省略可能なのに対して、interval定義は省略不能であり、また一連のアニメーション定義の先頭に出現する必要がある。pattern定義も少なくとも一つは存在する必要がある。</p>
					<p><a href="#animation*.interval,インターバル">interval定義</a>はアニメーションがいつ再生されるかの設定である。上例では「rarely」「talk」「never」の三種類の指定が登場している。詳細は<a href="#introduction_animationinterval">アニメーションインターバルの節</a>を参照されたいが、大意として「瞬き」アニメーションはときどき再生され、「トークに合わせて口を動かす」アニメーションはキャラクターが2文字喋るごとに再生されるようになっている。</p>
					<p><a href="#animation*.pattern*,描画メソッド,サーフェスID,ウェイト,X座標,Y座標">pattern定義</a>はアニメーションの各「コマ」の設定である。そのコマの描画メソッド（<a href="#introduction_drawmethod">描画メソッド</a>の節参照）、表示するまでの待ち時間、そのコマを下のコマに対してどれだけ位置をずらして描画するかについて設定を行う。pattern定義はコマが必要なだけ用意すればよい。pattern*の*にある数字は、0から始まる連番である。</p>
				</section>
				<section>
					<h1>各アニメーションの関係</h1>
					<p>全てのアニメーションにはIDが与えられる（具体的な指定はanimation*.intervalの節参照）。</p>
					<p>IDは単一のサーフェス内で重複が許されず、また異なるサーフェス間において同じIDをもつアニメーションは同じ意味を持つことが期待される。例えばキャラクターが正面を向いているsurface0と、横を向いているsurface1があったときに、その両方に「瞬き」のアニメーションを設定するとする。この時、キャラクターの姿勢の違いから実際に瞬きを表現するコマにあたる画像は違うものになるはずであるが、それにもかかわらず両方のサーフェスで同じアニメーションIDが与えられるべきである。特に後述の<a href="#introduction_mayuna">着せ替え</a>においてはこのIDと意味との関連付けは必須となる。</p>
					<p>全ての異なるアニメーションは基本的に独立しており、非同期的に開始・終了する。<br>例えば瞬きをするアニメーションと、トークに合わせて口元が動くアニメーションは、互いに他方が動いていようがいまいが気にせず開始・終了すべきであろうし、実際IDの異なるアニメーションとして定義されている限りはそのように動作する。</p>
					<p>しかしその一方で、startやalternativestartなどの、他のアニメーションを実行するための特殊な描画メソッドによって、アニメーション自体を他のアニメーションを実行するトリガとする仕組みも用意されている。<br>また、exclusiveオプションの指定により、排他的なアニメーションを実行することも可能である。</p>
				</section>
			</section>
			<section class="caption introduction" id="introduction_mayuna">
				<h1>着せ替え（MAYUNA）</h1>
				<section>
					<h1>概要</h1>
					<p>伺かのシェルは、着せ替えと呼ばれる仕組みを持つ。これは単一のシェル内で、複数の衣装などのパーツの表示・非表示や種類の切り替えを行うためのものである。</p>
					<p>伺かのシェルにおける着せ替えは、アニメーションの一種として位置づけられる。<br>ただし他のアニメーションのようにコマ送りされず、アニメーションの開始時に即時全てのコマ（pattern）およびベースのサーフェスが合成されて、以後静止画として扱われる点が特徴である（従ってpattern定義のウェイトパラメータは無視される）。<br>この「描画があたかもベースサーフェスと一体化したかのように振舞う」という性質は、衣服のようなものを表現する目的に良く適う。</p>
					<p>着せ替えのアニメーションとしての開始・終了は、主にオーナードローメニューの着せ替えメニューからスイッチする事で制御される。SSPの場合はそれに加えて、さくらスクリプトの<a href="list_sakura_script.html#_!_bind,%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%90%8D,%E3%83%91%E3%83%BC%E3%83%84%E5%90%8D,%E6%95%B0%E5%80%A4_">\![bind]</a>タグを用いたゴースト側からの制御が可能である。<br>オーナードローメニュー側の設定は、surfaces.txtではなく<a href="descript_shell.html">descript.txt</a>で行うので、そちらのページを参照。</p>
					<p>なお、surfaces.txtにおける一連のアニメーションに関する仕様にはMAYUNAという名前が与えられている。</p>
				</section>
				<section>
					<h1>基本書式と記述例</h1>
<pre><code>
surface0
{
// 服1の定義　アニメーションIDは0
animation0.interval,bind
animation0.pattern0,add,500,0,50,100

// 服2の定義　アニメーションIDは1
animation1.interval,bind
animation1.pattern0,add,501,0,50,100
}

//--- 以下着せ替えパーツ定義 ---
// 服1
surface500
{
element0,overlay,dress1.png,0,0
}

// 服2
surface501
{
element0,overlay,dress2.png,0,0
}
</code></pre>
					<p>surfaces.txtにおける着せ替えの定義は、例えば以上のようになる。</p>
					<p>上記では、surface0に対して「服1」と「服2」の二つの着せ替えを定義している。</p>
					<p>通常のアニメーション定義同様、interval定義とpattern定義が必要である。interval定義にbindを指定する事で、そのアニメーションが着せ替えの定義である事を示す。</p>
					<p>アニメーションの場合pattern定義はコマの数だけ行うが、着せ替えの場合は静止画仕様であるので、コマというよりはパーツを必要なだけ合成することになる。例のように着せ替えを構成するパーツが一つで済むならば、pattern行は1行のみになる。また着せ替えの場合各パーツは即時合成されるので、ウェイトパラメータは無視される。</p>
					<p>pattern定義の描画メソッドについては後述。</p>
				</section>
				<section>
					<h1>利用可能な描画メソッド</h1>
					<p>MATERIA（本家伺か）においては、着せ替えのために用意された4つのメソッド、すなわち「bind」「add」「reduce」「insert」が利用可能であった。このうちbindは旧仕様で、addが上位互換にあたる。</p>
					<p>SSPにおいては、普通のアニメーション描画メソッドとして用意されたものの一部が着せ替えでも利用可能である。</p>
					<p>具体的に着せ替えで利用できる描画メソッドなどの詳細については<a href="#introduction_drawmethod">描画メソッド</a>の節参照。</p>
				</section>
				<section>
					<h1>インターバルの組み合わせ指定におけるbind</h1>
					<p>SSPにおいては、<a href="#introduction_animationinterval">アニメーションインターバルの節</a>で触れているように、インターバルの組み合わせ指定が可能である。</p>
					<p>組み合わせ指定の中にbindを含めた場合のアニメーションは、bind単体であれば本来持っていた静止画仕様であるという性質は失う（pattern定義のウェイトパラメータが無視されなくなる）。しかしアニメーションの寿命は変わらないので、例えばbind+runonceのような組み合わせ指定の場合、すべてのpatternの描画が終わった時点の表示が、以後ベースサーフェスの変更または着せ替え状態の変化があるまで継続し続けることになる。</p>
					<p>従って、bindを含むインターバル組み合わせ指定では、pattern定義の最終行においてアニメーションの終了を行わず、静止画として残したい描画を合成しておくべきである。</p>
				</section>
				<section>
					<h1>多重着せ替え定義（SSPのみ）</h1>
					<p>アニメーションのコマとして参照した先のsurfaceに、そのsurfaceのアニメーションが定義されていた場合、通常それらは無視される。</p>
					<p>しかしSSPではintervalがbindのアニメーション（＝着せ替え）のみ無視されず反映されるようになっている。</p>
					<p>これによって、着せ替えの影響を受けるような構造のアニメーションについて、アニメーションのコマ側で着せ替えに応じた定義を行う事が可能である。</p>
					<p>なお多重着せ替えを入れ子にする事も可能であるが、循環的な参照は無視される。</p>
				</section>
			</section>
			<section class="caption" id="caption_seriko-redefine">
				<h1>SERIKOの旧定義と新定義について</h1>
				<section>
					<h1>SERIKOの新定義と旧定義とは</h1>
					<p>
						本家伺か（MATERIA）の開発末期のバージョンで、surfaces.txtへのSERIKO（アニメーション）に関する設定書式に変更がありました。
						<br>これについて<a href="http://usada.sakura.vg/contents/seriko.html">本家仕様書</a>にあるSERIKO/1.x系の従来書式の事を旧定義、対する公式にドキュメント化されないままとなった新たな書式（SERIKO/2.0）のことを新定義と呼ぶ事があります。
					</p>
					<p>
						なお、<em>これとは全く別に</em>、MATERIA開発終了後にSSPなどがsufraces.txtの書式について独自に追加した記法などがあります（例えばsurface.appendや、surface1-9といった範囲指定）。
						<br>これを含めて新定義と呼ぶ人や文献があるかもしれませんが、少なくともukadocで言う新旧定義はあくまでそのような用法ではなく、SERIKOの書式についての言葉である点に注意してください。
					</p>
				</section>
				<section>
					<h1>新定義と旧定義の違い</h1>
					<p>新定義における書式の変更点は以下の四つです。</p>
					<ol>
						<li><a href="#animation*.interval,インターバル">SERIKO関連の定義行</a>を全て「animation」の語からはじめるように変更。</li>
						<li><a href="#animation*.pattern*,描画メソッド,サーフェスID,ウェイト,X座標,Y座標">pattern定義行</a>のパラメータの順序が変更された（描画メソッド指定を先頭に移動）。</li>
						<li>pattern定義のウェイトパラメータの単位が、10ミリ秒から1ミリ秒に変更された。</li>
						<li>描画メソッドの<a href="#alternativestart,_ID1,ID2..._">alternativestart</a>で、ID指定の括弧が[]から()に変更された。</li>
					</ol>
					<p>これに加え、descriptブレスを設けて「<a href="#version,*">version,1</a>」の定義を行うことが必要です。</p>
					<p>以下は<em>同じ定義内容</em>の旧定義と新定義の例です。</p>
		<pre><code class="surfaces">// 旧定義
surface1
{
<span class="animationID">0</span>interval,rarely
<span class="animationID">0</span>pattern<span class="patternID">0</span>,<span class="surfaceID">0</span>,<span class="wait">0</span>,<span class="method">alternativestart,[1,2]</span>

<span class="animationID">1</span>interval,never
<span class="animationID">1</span>pattern<span class="patternID">0</span>,<span class="surfaceID">101</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">1</span>pattern<span class="patternID">1</span>,<span class="surfaceID">102</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">1</span>pattern<span class="patternID">2</span>,<span class="surfaceID">101</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">1</span>pattern<span class="patternID">3</span>,<span class="surfaceID">-1</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">0</span>,<span class="posy">0</span>

<span class="animationID">2</span>interval,never
<span class="animationID">2</span>pattern<span class="patternID">0</span>,<span class="surfaceID">101</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">2</span>pattern<span class="patternID">1</span>,<span class="surfaceID">102</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">2</span>pattern<span class="patternID">2</span>,<span class="surfaceID">101</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">2</span>pattern<span class="patternID">3</span>,<span class="surfaceID">-1</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">0</span>,<span class="posy">0</span>
<span class="animationID">2</span>pattern<span class="patternID">4</span>,<span class="surfaceID">101</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">2</span>pattern<span class="patternID">5</span>,<span class="surfaceID">102</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">200</span>,<span class="posy">100</span>
<span class="animationID">2</span>pattern<span class="patternID">6</span>,<span class="surfaceID">101</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">0</span>,<span class="posy">0</span>
<span class="animationID">2</span>pattern<span class="patternID">7</span>,<span class="surfaceID">-1</span>,<span class="wait">70</span>,<span class="method">overlay</span>,<span class="posx">0</span>,<span class="posy">0</span>
}
</code></pre>
<pre><code class="surfaces">// 新定義
surface1
{
animation<span class="animationID">0</span>.interval,rarely
animation<span class="animationID">0</span>.pattern<span class="patternID">0</span>,<span class="method">alternativestart,(1,2)</span>

animation<span class="animationID">1</span>.interval,never
animation<span class="animationID">1</span>.pattern<span class="patternID">0</span>,<span class="method">overlay</span>,<span class="surfaceID">101</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">1</span>.pattern<span class="patternID">1</span>,<span class="method">overlay</span>,<span class="surfaceID">102</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">1</span>.pattern<span class="patternID">2</span>,<span class="method">overlay</span>,<span class="surfaceID">101</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">1</span>.pattern<span class="patternID">3</span>,<span class="method">overlay</span>,<span class="surfaceID">-1</span>,<span class="wait">700</span>,<span class="posx">0</span>,<span class="posy">0</span>

animation<span class="animationID">2</span>.interval,never
animation<span class="animationID">2</span>.pattern<span class="patternID">0</span>,<span class="method">overlay</span>,<span class="surfaceID">101</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">1</span>,<span class="method">overlay</span>,<span class="surfaceID">102</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">2</span>,<span class="method">overlay</span>,<span class="surfaceID">101</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">3</span>,<span class="method">overlay</span>,<span class="surfaceID">-1</span>,<span class="wait">700</span>,<span class="posx">0</span>,<span class="posy">0</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">4</span>,<span class="method">overlay</span>,<span class="surfaceID">101</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">5</span>,<span class="method">overlay</span>,<span class="surfaceID">102</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">6</span>,<span class="method">overlay</span>,<span class="surfaceID">101</span>,<span class="wait">700</span>,<span class="posx">200</span>,<span class="posy">100</span>
animation<span class="animationID">2</span>.pattern<span class="patternID">7</span>,<span class="method">overlay</span>,<span class="surfaceID">-1</span>,<span class="wait">700</span>,<span class="posx">0</span>,<span class="posy">0</span>
}
</code></pre>
					<ul class="surfaces">
						<li class="animationID">アニメーションID</li>
						<li class="patternID">パターンID</li>
						<li class="surfaceID">サーフェスID</li>
						<li class="method">描画メソッド</li>
						<li class="wait">ウェイト</li>
						<li class="posx">x座標</li>
						<li class="posy">y座標</li>
					</ul>
					<p>
						先頭が「animation」から始まるようになった他、ウェイトの数値が10倍になっていること、描画メソッドの指定がパラメータの先頭に移動したことに注意してください。
						<br />またalternativestartは[]が()に変更されているほか、alternativestartの場合無視されるパラメータである「サーフェスID」「ウェイト」について、旧定義ではダミーの数値0を書いていたのに対し、新定義では描画メソッドが先頭に移動した関係から、「合成位置x,y」含めて丸ごと省略できていることもわかるかと思います。
					</p>
				</section>
				<section>
					<h1>新定義で記述する利点</h1>
					<ul>
						<li>
							SSPが独自に追加した設定（このページにある項目で<img src="image/icon_m.png" alt="Materia" width="34" height="16" />の表示がなく<img src="image/icon_s.png" alt="SSP" width="34" height="16" />の表示のみがあるもの）については、旧定義で書かれる事が想定されていない場合があります。
							<br />今後追加されるあらゆる設定にも同様の事がいえます。
							<br />こうした設定を利用する場合は、新定義で記述することが望ましいでしょう（旧定義だと正常動作しない可能性がある）。
							<br />その場合、新旧定義を混在させるとエラーとなるので、新定義に統一する必要があります。
						</li>
						<li>
							ウェイトの単位が10msから1msに変更され、より細やかな設定が可能になります。
						</li>
						<li>
							また上例で見た通り、描画メソッドがパラメータの先頭に移動した事で、startやalternativestartのような特殊な描画メソッドで無視されるパラメータが綺麗に省略されることも利点かもしれません。
						</li>
						<li>
							他に、「animation」の語句が明示される事で、SERIKOに関する定義のまとまりが強調され、よりその行の意味が解りやすくなる面もあるかもしれませんが、およそ見やすさというものは慣れや個人差によるところが大であり、旧定義の方が親しんでいるし見やすいというのも自然な感じ方です。
						</li>
					</ul>
					<p>以上のような点にメリットを感じない場合、SSPのみでの対応を考えるなら必ずしも移行する意味はないかもしれません。</p>
					<p>なお、UKADOCでは基本的にSERIKOに関しては新定義で記述を行っているため、旧定義の記述で書きたい場合は上記を参考に適宜読み替えてください。</p>
				</section>
			</section>
			<section class="caption" id="caption_surfacebraceID">
				<h1>surface*ブレスで可能なID指定</h1>
				<p>以下の各記法は併用可能。いずれもSSP専用。</p>
				<dl>
					<dt>列挙指定「,」</dt>
					<dd>
<pre><code>surface1,3,4,6,12
{
// 略
}
</code></pre>
						のように「,」区切りでIDを指定することで、複数のサーフェスに対して同じ内容で定義することが可能。
					</dd>
					<dt>範囲指定「-」</dt>
					<dd>
<pre><code>surface1-12
{
// 略
}
</code></pre>
						のように「-」を用いてIDを指定する事で、番号が連続する範囲の（例の場合surface1から12まで）複数のサーフェスに対して同じ内容で定義することが可能。
					</dd>
					<dt>範囲指定の除外指定「!」</dt>
					<dd>
<pre><code>surface1-30,!15,!20-25
{
// 略
}
</code></pre>
						のように、「!」に続けて単独または範囲指定したIDは、その定義の対象から除外される（例の場合結局surface1-14,16-19,26-30などとした場合と同義）。<br>
						なお、!による除外は記述の位置によらず他の指定よりも優先される（例えばsurface1-10,!2-4,3などと!の後に追記しても3は除外される）。
					</dd>
				</dl>
				<p>materia本来の仕様では、以下のようなsurface付での列挙指定のみ許される。</p>
<pre><code>surface1,surface3,surface4
{
// 略
}
</code></pre>
			</section>
			<section class="caption" id="caption_surface.append">
				<h1>surface*ブレスとsurface.append*ブレス</h1>
				<p>surface.appendによる定義は、「既に（surfaceブレス、またはsuface*.pngの存在によって）ある定義」に対してのみ付け加えられる。</p>
				<p>従って例えば、</p>
<pre><code>surface1,3
{
collision0,188,25,252,63,Head
collision1,180,191,220,222,Bust
}
</code></pre>
				<p>の後に、追加定義のつもりで</p>
<pre><code>surface1-3
{
animation0.interval,sometimes
animation0.pattern0,overlay,101,100,168,67
animation0.pattern1,overlay,100,100,168,67
animation0.pattern2,overlay,101,100,168,67
animation0.pattern3,overlay,-1,100,168,67
}
</code></pre>
				<p>などとすると、本来定義するつもりのない「surface2」が<em>新設されて</em>、定義が行われてしまう。</p>
				<p>このため、appendを使わない範囲指定の追加定義は「覚えのない重複定義エラー」などの原因になり得る。しかし、</p>
<pre><code>surface.append1-3
{
// 略
}
</code></pre>
				<p>とした場合は、既に定義のある「surface1」および「surface3」のみにappendで追加した定義が加わり、予め存在しない「surface2」は内部的にも<em>新設されない</em>。</p>
				<p>なお、この関係から、<em>surfaceブレスは</em>定義ファイル（surfaces.txtなど）内で<em>surface.appendブレスより先に書く</em>必要がある事に注意。</p>
			</section>
			<section class="caption" id="caption_basesurface">
				<h1>ベースサーフェス</h1>
				<section>
					<h1>ベースサーフェス</h1>
					<p>各surfaceの基本的状態となる、アニメーションが合成される前の画像をベースサーフェスと呼ぶ。</p>
					<p>アニメーションは通常ベースサーフェスの上位（画面手前側）に描画されることとなる。</p>
				</section>
				<section>
					<h1>ベースサーフェスの実体</h1>
					<p>あるsurfaceのベースサーフェスは、IDに対応するsurface*.pngと、IDに対応するsurfaceブレスでの<a href="#element*,描画メソッド,ファイル名,X座標,Y座標">element指定</a>で定義される。</p>
					<p>surface*.pngがあるサーフェスでは、その画像がsurface*のベースサーフェスとなる。ただし同時にelement0が定義されている場合、surface*.pngの内容は破棄されelement0の定義内容で置き換わる（これは互換性確保のための仕様である）。</p>
					<p>element1以降の定義がある場合は、それらの上に積み重なる形で順次合成され、最終的な合成結果がベースサーフェスとして扱われる。</p>
				</section>
			</section>
			<section class="caption" id="caption_z-axis">
				<h1>各要素の上下構造</h1>
				<section>
					<h1>上位と下位</h1>
					<p>以下画面手前側を上位、画面奥側を下位として表現する。</p>
				</section>
				<section>
					<h1>各パーツの上下構造</h1>
					<p>elementおよび着せ替え（インターバルがbindのアニメーション）では、それぞれelementID・patternIDが小さい方が下位、大きい方が上位となる。</p>
				</section>
				<section>
					<h1>ベースサーフェスと各アニメーションの上下構造</h1>
					<p>ベースサーフェスは基本的にすべての合成の最下位に置かれる画像だが、SSPの<a href="#animation*.option,background">backgroundオプション</a>が指定されたアニメーションは、ベースサーフェスより下位に（裏に）合成される。</p>
					<p>着せ替えを含む各アニメーション間の上下構造は、通常アニメーションIDの大きい方から降順で上位となる（番号が大きい方から画面手前側に配置される）。ただしSSPではdescriptブレスで<a href="#animation-sort,ソート順序">animation-sort</a>定義を行えば、昇順にもできる。</p>
				</section>
				<section>
					<h1>当たり判定（collision）の上下構造</h1>
					<p>あるサーフェスの当たり判定は、基本的にsurfaces.txtにおいて先に登場したcollision定義が上位となる。ただしSSPではdescriptブレスで<a href="#collision-sort,ソート順序">collision-sort</a>定義を行えば、collisionIDを基準として昇順・降順にも設定できる。</p>
					<p>またSSPでは<a href="#animation*.collision*,当たり判定定義animation*.collisionex*,当たり判定定義(ex)">animation*.collision</a>の設定によって、特定のアニメーションが表示されている場合にのみ有効な当たり判定が設定できる。この場合はまず各アニメーションの上下構造が考慮された上で、それぞれアニメーション・ベースサーフェスの当たり判定が通常どおりの順序で評価される。</p>
					<p>animation-sortの設定がdescendの場合を例としてまとめると、上位から下位へ順に</p>
					<ol>
						<li>IDがより大きい通常のアニメーションの、より上位の当たり判定</li>
						<li>IDがより大きい通常のアニメーションの、より下位の当たり判定</li>
						<li>IDがより小さい通常のアニメーションの、より上位の当たり判定</li>
						<li>IDがより小さい通常のアニメーションの、より下位の当たり判定</li>
						<li>ベースサーフェスの、より上位の当たり判定</li>
						<li>ベースサーフェスの、より下位の当たり判定</li>
						<li>IDがより大きいbackgroundオプション付アニメーションの、より上位の当たり判定</li>
						<li>IDがより大きいbackgroundオプション付アニメーションの、より下位の当たり判定</li>
						<li>IDがより小さいbackgroundオプション付アニメーションの、より上位の当たり判定</li>
						<li>IDがより小さいbackgroundオプション付アニメーションの、より下位の当たり判定</li>
					</ol>
					<p>となる（ここでいうアニメーションには着せ替えも含む）。</p>
				</section>
			</section>
			<section class="caption" id="caption_standarddef">
				<h1>サーフェスIDの割り振り</h1>
				<p>どんな表情・内容にどのサーフェスIDを割り振るかは、基本的に自由。</p>
				<p>ただしsurface0,surface10はそれぞれデフォルトサーフェスとして必須とされ、たとえ相方側のないゴーストであってもsurface10として透明な画像などを用意する必要がある（SSPに限っては、必須とまではされない。またdescriptなどの設定でデフォルトサーフェスの変更も可能）。</p>
				<p>また、一応の「事実上の標準」のようなIDの割り振りがあるので以下に示す。あくまで以下の割り振りは（0,10以外は）必須ではなく参考程度のもので、基本的には自由。</p>
				<p>sakura側</p>
				<ul>
					<li>00	素</li>
					<li>01	照れ</li>
					<li>02	驚き</li>
					<li>03	不安</li>
					<li>04	落ち込み</li>
					<li>05	微笑み</li>
					<li>06	目閉じ</li>
					<li>07	怒り</li>
					<li>08	冷笑</li>
					<li>09	照れ怒り</li>
					<li>25	歌</li>
				</ul>
				<p>kero側</p>
				<ul>
					<li>10	素</li>
					<li>11	刮目</li>
					<li>19	歌</li>
				</ul>
				<p>なお、MATERIAではsurfaceIDにつかえる数字は0から8192までという制限がある。</p>
			</section>
			<dl id="element*,描画メソッド,ファイル名,X座標,Y座標">
				<dt class="entry">element*,描画メソッド,ファイル名,X座標,Y座標</dt>
				<dd class="entry">
					<p>
						ベースサーフェスの合成。
						<br>複数の画像を合成し、その合成結果をベースサーフェスとして一枚の画像のように扱う仕組み。
						<br>サーフェスに対応するsurface*.pngという画像がある場合、element0が定義されていると元のsurface*.pngの内容が破棄されて、element0で置き換えられる
						<br>element1以降は、その上に順次合成されていく。
						<br>SSP2.3.53からは、element定義されたサーフェスをアニメーションパーツとして用いた場合も、一枚の画像のように振る舞う（以前は未定義）。
						<br>*の部分（elementID）は同じsurface内で一貫した、0から始まる通し番号。
						<br>描画メソッドは下記の<a href="#h-drowmethod">描画メソッド</a>参照。
					</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.interval,インターバル">
				<dt class="entry">animation*.interval,インターバル</dt>
				<dd class="entry">
					<p>
						アニメーションが開始するタイミング（周期）の定義。
						<br>インターバルは下記の<a href="#h-animationinterval">アニメーションインターバル</a>参照。SSPのみ+区切りで列挙する事で組み合わせ指定が可能。
						<br>*の部分（animationID）は任意の数字。そのスコープ内（\0、\1、...）の全surfaceで、共通して同じIDのアニメーションが同じ意味（例えば「瞬き」「口パク」「同じ服の着せ替え」など）を持つようにする。
						<br>interval定義はそのIDのアニメーション定義全体の始点を示し、一連のanimation定義の中で必ず最初に記述されなければならない。
						<br>アニメーションの重なり方とIDの順序の関係は<a href="#animation-sort,ソート順序">animation-sort</a>参照。
						<br><a href="#caption_seriko-redefine">旧定義</a>：*interval,インターバル
					</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.pattern*,描画メソッド,サーフェスID,ウェイト,X座標,Y座標">
				<dt class="entry">animation*.pattern*,描画メソッド,サーフェスID,ウェイト,X座標,Y座標</dt>
				<dd class="entry">
					<p>
						アニメーションの各コマの定義。各コマは通常それ以前のコマをリセットして新たにベースサーフェスに合成される形で描画される（厳密には描画メソッドによる）。
						<br>animationに続く*の部分はanimationID（animation*.intervalの*と同一）。
						<br>patternに次ぐ*の部分（パターンID）は、一連のanimation*.pattern定義において0から始まる通し番号。materiaでは127が上限。番号の小さい方から積み重なる形で描画される。
						<br>描画メソッドは下記の<a href="#h-drowmethod">描画メソッド</a>参照。
						<br>ウェイトはそのコマを描画する<em>まで</em>の待ち時間。単位はミリ秒。SSPのみ「最小ウェイト-最大ウェイト」とマイナス文字で区切った書き方もでき、その場合は最小～最大間でランダムに選択される。
						<br>X座標、Y座標はそのコマをベース（そのコマまでの描画結果）に対してどれだけずらして表示するかの指定。
						<br>サーフェスIDに-1でそのアニメーションの停止、-2で現在実行中の他の全てのアニメーションを停止する事ができる。いずれの場合も描画メソッドやX座標、Y座標は無視される。
						<br><a href="#caption_seriko-redefine">旧定義</a>：*pattern*,サーフェスID,ウェイト,描画メソッド,X座標,Y座標
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.option,exclusive">
				<dt class="entry">animation*.option,exclusive</dt>
				<dd class="entry">
					<p>
						アニメーションの排他的実行オプション。
						<br>即ちexclusiveオプションが指定されたアニメーションが実行された時点で、他のすべてのアニメーションが停止し、またexclusiveオプションのアニメーションの終了まで、他のいかなるアニメーションも新たに開始されない。
						<br>animationに続く*の部分はanimationID（animation*.intervalの*と同一）。
						<br>なおintervalがbindのアニメーションについてはこの指定は未定義である。
						<br>SSPのみ、animation*.option,exclusive,(1,3,5)のようにすると、指定IDのアニメーションに対してのみ限定的に排他制御することができる。
						<br><a href="#caption_seriko-redefine">旧定義</a>：*option,exclusive
					</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.option,background">
				<dt class="entry">animation*.option,background</dt>
				<dd class="entry">
					<p>
						アニメーションの背面実行オプション。
						<br>backgroundオプションが指定されたアニメーションはベースサーフェスの後ろ（画面奥側）で実行される。
						<br>animationに続く*の部分はanimationID（animation*.intervalの*と同一）。
					</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.option,shared-index">
				<dt class="entry">animation*.option,shared-index</dt>
				<dd class="entry">
					<p>
						\sタグでのベースサーフェスの切り替えをまたいで、同じIDのアニメーションを途中から継続して実行する。
						<br />具体的には、\s実行前にpattern4までアニメーションが実行されていたとして、\s実行後もpattern4から再スタートする。
						<br />\s切り替え元・切り替え先の両方に指定が必要で、どちらか片方だけだとリセットされる。
						<br />また、切り替え先のアニメーションでpattern IDが見つからない場合もリセットされる。
					</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /> 2.6.02</li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.option,オプション">
				<dt class="entry">animation*.option,オプション</dt>
				<dd class="entry">
					<p>
						exclusive・background・shared-indexオプションは同時指定可能で、+区切りで複数オプション可。例：exclusive+background
						<br>animationに続く*の部分はanimationID（animation*.intervalの*と同一）。
						<br>animation*.option,exclusive+background,(1,3,5) のようにすると、<em>exclusiveのみ</em>影響を受ける。
						<br>なおintervalがbindのアニメーションについてはexclusive指定はそもそも未定義である。
					</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="animation*.collision*,当たり判定定義animation*.collisionex*,当たり判定定義(ex)">
				<dt class="entry">animation*.collision*,当たり判定定義<br>animation*.collisionex*,当たり判定定義(ex)</dt>
				<dd class="entry">
					<p>
						通常の<a href="#collision*,始点X,始点Y,終点X,終点Y,ID">collision</a>や<a href="#collisionex*,ID,タイプ,座標1,座標2...">collisionex</a>のアニメーション動作中限定の定義。インターバルbindにも有効。
						<br>animationに続く*の部分はanimationID（animation*.intervalの*と同一）。
						<br>collisionに次ぐ*の部分は、一連のanimation*.collision定義内で重複しない番号。</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="collision*,始点X,始点Y,終点X,終点Y,ID">
				<dt class="entry">collision*,始点X,始点Y,終点X,終点Y,ID</dt>
				<dd class="entry">
					<p>当たり判定。囲まれた範囲がIDの領域となる。<br>*の部分（collisionID）は、同じsurface内で重複しない通し番号。<br>当たり判定の重なり方とIDの順序の関係は<a href="#collision-sort,ソート順序">collision-sort</a>参照。</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="collisionex*,ID,タイプ,座標1,座標2...">
				<dt class="entry">collisionex*,ID,タイプ,座標1,座標2...</dt>
				<dd class="entry">
					<p>不定形当たり判定。<br>
					*の部分（collisionID）は、同じsurface内で重複しない通し番号。<br>
					タイプは以下の通り。
					</p>
					<dl>
						<dt>rect</dt>
						<dd>長方形。座標は始点XYと終点XYの4つ。<br />例：collisionex0,Head,rect,100,100,200,300</dd>
						<dt>ellipse</dt>
						<dd>楕円。座標は楕円を囲む長方形、始点XYと終点XYの4つ。<br />例：collisionex0,Head,ellipse,100,100,200,300</dd>
						<dt>circle</dt>
						<dd>真円。中心点のXYの値、半径の順で記述する。<br />例：collisionex0,Head,circle,100,200,20</dd>
						<dt>polygon</dt>
						<dd>多角形。座標は各頂点、交差可。<br />例：collisionex0,Head,polygon,100,100,200,300,50,200</dd>
						<dt>region</dt>
						<dd>[SSP 2.5.19～]指定した画像ファイルの指定色の領域を当たり判定として扱う。
						<br />大量に(100～)使用すると全体的に動作が重くなるので注意。
						<br />「領域反転」をtrueにすると「指定色でない領域」の意味になる。省略可能。
						<br />指定フォーマット：ファイル名,R,G,B,領域反転(falseかtrue)
						<br />例1: collisionex0,Head,region,atari.png,255,0,0
						<br />例2: collisionex1,Head,region,atari.png,0,255,0,true</dd>
					</dl>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="_2_sakura.balloon.offsetx,座標">
				<dt class="entry">sakura.balloon.offsetx,座標</dt>
				<dd class="entry">
					<p>そのサーフェスでのみの本体側バルーン位置X座標。</p>
					<p class="default">通常：バルーンの左右端と、サーフェスの右左端が揃う位置<br>
					align=top/bottom：サーフェスの中央</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="_2_sakura.balloon.offsety,座標">
				<dt class="entry">sakura.balloon.offsety,座標</dt>
				<dd class="entry">
					<p>そのサーフェスでのみの本体側バルーン位置Y座標。</p>
					<p class="default">通常：バルーンの上端と、サーフェスの上端が揃う位置<br>
					align=top/bottom：バルーンの上下端と、サーフェスの下上端が揃う位置</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="_2_kero.balloon.offsetx,座標">
				<dt class="entry">kero.balloon.offsetx,座標</dt>
				<dd class="entry">
					<p>そのサーフェスでのみの相方側バルーン位置X座標。</p>
					<p class="default">通常：バルーンの左右端と、サーフェスの右左端が揃う位置<br>
					align=top/bottom：サーフェスの中央</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="_2_kero.balloon.offsety,座標">
				<dt class="entry">kero.balloon.offsety,座標</dt>
				<dd class="entry">
					<p>そのサーフェスでのみの相方側バルーン位置Y座標。</p>
					<p class="default">通常：バルーンの上端と、サーフェスの上端が揃う位置<br>
					align=top/bottom：バルーンの上下端と、サーフェスの下上端が揃う位置</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="_2_balloon.offsetx,座標">
				<dt class="entry">balloon.offsetx,座標</dt>
				<dd class="entry">
					<p>そのサーフェスでのみのバルーン位置X座標(本体・相方問わず)。<br>
					offset.xとも記述可能。</p>
					<p class="default">通常：バルーンの左右端と、サーフェスの右左端が揃う位置<br>
					align=top/bottom：サーフェスの中央</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="_2_balloon.offsety,座標">
				<dt class="entry">balloon.offsety,座標</dt>
				<dd class="entry">
					<p>そのサーフェスでのみのバルーン位置Y座標(本体・相方問わず)。。<br>
					offset.xとも記述可能。</p>
					<p class="default">通常：バルーンの上端と、サーフェスの上端が揃う位置<br>
					align=top/bottom：バルーンの上下端と、サーフェスの下上端が揃う位置</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="point.centerx,座標">
				<dt class="entry">point.centerx,座標</dt>
				<dd class="entry">
					<p>サーフェスの中心X座標。<br>通常は使用されないが、Sakura APIなど外部から取得可能。</p>
					<p class="default">サーフィスの中心(幅÷2)</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="point.centery,座標">
				<dt class="entry">point.centery,座標</dt>
				<dd class="entry">
					<p>サーフェスの中心Y座標。<br>通常は使用されないが、Sakura APIなど外部から取得可能。</p>
					<p class="default">サーフェスの中心(高さ÷2)</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="point.kinoko.centerx,座標">
				<dt class="entry">point.kinoko.centerx,座標</dt>
				<dd class="entry">
					<p>きのこの生えるX座標。</p>
					<p class="default">サーフェスの中心(幅÷2)</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="point.kinoko.centery,座標">
				<dt class="entry">point.kinoko.centery,座標</dt>
				<dd class="entry">
					<p>きのこの生えるY座標。</p>
					<p class="default">サーフェスの上端＋20ピクセル下(SSP)</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="point.basepos.x,座標">
				<dt class="entry">point.basepos.x,座標</dt>
				<dd class="entry">
					<p>ウインドウを初期配置・位置保存する際の基準位置のX座標。<br>
					異なるサーフェスサイズの画像に切り替えた際の位置ずれなどを調整することができる。</p>
					<p class="default">サーフェスの中心(幅÷2)</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="point.basepos.y,座標">
				<dt class="entry">point.basepos.y,座標</dt>
				<dd class="entry">
					<p>ウインドウを初期配置・位置保存する際の基準位置のY座標です。<br>
					異なるサーフェスサイズの画像に切り替えた際の位置ずれなどを調整することができる。</p>
					<p class="default">サーフェスの下端</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<section class="subcategory">
				<h1 id="h-animationinterval">アニメーションインターバル</h1>
				<section class="caption introduction" id="introduction_animationinterval">
					<h1>アニメーションインターバル</h1>
					<section>
						<h1>概要</h1>
						<p><a href="#animation*.interval,インターバル">animation*.interval</a>において指定される、アニメーションが動作する周期・タイミング（トリガー）の指定。</p>
					</section>
					<section>
						<h1>組み合わせ指定（SSP拡張機能）</h1>
						<p>SSPの場合、アニメーションインターバルは「+」区切りで列挙する事で複数の指定を組み合わせた指定をする事ができる。元来bindに対して指定する事が想定された仕様のため、bindなしでの指定については動いているとしても要注意。</p>
						<p>以下に組み合わせの例を挙げる。</p>
						<dl>
							<dt>bind+always</dt>
							<dd>その着せ替えがONの場合に、常に実行されるアニメーション。</dd>

							<dt>bind+runonce</dt>
							<dd>その着せ替えがONの場合に、その着せ替え定義のされているサーフェスに切り替わった時か、逆にそのサーフェス表示中にその着せ替え定義がONになった場合に一度だけ実行されるアニメーション。</dd>

							<dt>bind+random,頻度</dt>
							<dd>その着せ替えがONの場合に、毎秒(1/頻度)の確率で発生するアニメーション。</dd>

							<dt>bind+periodic,間隔</dt>
							<dd>その着せ替えがONの場合に、(間隔)秒毎に発生するアニメーション。</dd>

							<dt>bind+runonce+random,5</dt>
							<dd>その着せ替えがONの場合に、その着せ替え定義のされているサーフェスに切り替わった時か、逆にそのサーフェス表示中にその着せ替え定義がONになった場合に一度実行され、以後毎秒5分の1の確率で再生されるアニメーション。</dd>
						</dl>
						<p>bindに対して+区切りで他の指定をした場合、bindインターバルが本来持つ「pattern定義のウェイトパラメータが無視されて静止画としてベースサーフェスと一体化する」といった性質は失われる。</p>
						<p>また、random・periodic・talkのようなパラメータが必要な指定では、パラメータは組み合わせ指定の場合も末尾に書く。</p>
						<p>以下は<em>誤り</em>。</p>
						<pre>animation0.interval,random,5+bind</pre>
						<p>以下は<em>正しい</em>。</p>
						<pre>animation1.interval,bind+random,5</pre>
						<p>パラメータのあるインターバル指定同士を組み合わせるのは不可。</p>
					</section>
				</section>
				<dl id="sometimes">
					<dt class="entry">sometimes</dt>
					<dd class="entry">
						<p>そのサーフェスである間毎秒2分の1の確率で再生。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="rarely">
					<dt class="entry">rarely</dt>
					<dd class="entry">
						<p>そのサーフェスである間毎秒4分の1の確率で再生。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="random,数値">
					<dt class="entry">random,数値</dt>
					<dd class="entry">
						<p>そのサーフェスである間毎秒数値分の1の確率で再生。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="periodic,数値">
					<dt class="entry">periodic,数値</dt>
					<dd class="entry">
						<p>そのサーフェスである間数値秒間隔で定期的に再生。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="always">
					<dt class="entry">always</dt>
					<dd class="entry">
						<p>そのサーフェスである間ループ再生。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="runonce">
					<dt class="entry">runonce</dt>
					<dd class="entry">
						<p>サーフェスに切り替わった瞬間に1回のみ再生。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="never">
					<dt class="entry">never</dt>
					<dd class="entry">
						<p>自動では実行されない。他のアニメーションからのstartメソッドやalternativestartメソッドなどによる呼びだしか、さくらスクリプトの<a href="list_sakura_script.html#_i_ID%E7%95%AA%E5%8F%B7_">\i[*]</a>などによる命令以外では再生しないアニメーションに対して指定する。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="yen-e">
					<dt class="entry">yen-e</dt>
					<dd class="entry">
						<p>そのサーフェスで\eが来た時に実行。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="talk,数値">
					<dt class="entry">talk,数値</dt>
					<dd class="entry">
						<p>そのサーフェスでバルーン内にテキストが表示されていく時に実行。<br>数値分の文字がくるごとにアニメーションする。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="_1_bind">
					<dt class="entry">bind</dt>
					<dd class="entry">
						<p>そのアニメーションをサーフェスの<a href="#introduction_mayuna">着せ替え</a>として定義する。</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
			</section>
			<section class="subcategory">
				<h1 id="h-drowmethod">描画メソッド</h1>
				<section class="caption introduction" id="introduction_drawmethod">
					<h1>描画メソッド</h1>
					<section>
						<h1>概要</h1>
						<p><a href="#animation*.pattern*,描画メソッド,サーフェスID,ウェイト,X座標,Y座標">animationパターン定義</a>および<a href="#element*,描画メソッド,ファイル名,X座標,Y座標">element定義</a>における、各コマ（パーツ）の合成・描画方法。</p>
						<p>画像の合成ではなく、<a href="#caption_basesurface">ベースサーフェス</a>の置き換え(base)、ベースサーフェスの移動（move）や他のアニメーションの挿入・実行（insert、start、stop、alternativestart、alternativestop）といった様々な役割のメソッドが存在する。</p>
					</section>
					<section>
						<h1>着せ替えにおける描画メソッドの扱い</h1>
						<p>着せ替え定義中では、画像の合成でないメソッド（move、insert、start、stop、alternativestart、alternativestop）は無効である（overlayとして扱われる）。ただしbaseは一番最初のpatternに使用した場合のみ有効であり、その着せ替えがONになっている場合のみベースサーフェスを置き換えるような仕組みが実現できる。</p>
						<p>着せ替え用のメソッドとして実装されているaddとbindは、実装上はoverlayと同義である。着せ替えにおいてこの三つはどれを指定しても結局同じ効果となる。</p>
					</section>
					<section>
						<h1>element定義における描画メソッドの扱い</h1>
						<p>element定義中では、画像の合成でないメソッド（base、move、insert、start、stop、alternativestart、alternativestop）は無効である（overlayとして扱われる）。</p>
						<p>その他着せ替え用のメソッドadd、bindも無効である（が、SSPの現実装において無効な指定はoverlayと読み替えられるため、結果的に指定どおりの描画にはなる）。</p>
						<p>自明ではあるが、最初のelement（element0、surface*.pngが存在しない場合のはそれ以降の場合もある）で指定された描画メソッドはほとんどのものがbaseと同義になる。ただしasisメソッドで透過色がそのまま表示される点は有効である。</p>
						<p>なお、element合成されたサーフェスがアニメーションパーツとして用いられた場合、element合成の結果が一枚の画像のように扱われる。ただしこの実装はSSP2.3.53からのもので、それ以前は未定義であった事に注意。</p>
					</section>
					<section>
						<h1>合成系メソッドのelement・アニメーション・着せ替えでの相違点と共通点</h1>
						<p>合成系のメソッドの意味合いは、element・アニメーション・着せ替えのそれぞれで異なってくる。</p>
						<p>element定義は、ベースサーフェスとなる一枚の静止画を得ることが目的である。element定義では、直前までの合成結果に対してさらに次の合成が繰り返されてゆき、最終的な合成結果として一枚の静止画を得る。</p>
						<p>着せ替え定義もelement定義と同様に、静止画を得るための仕組みであるので、描画メソッドの解決の流れはelement定義とよく似ている。着せ替えのpattern定義では、最初のpatternがベースサーフェスに対して合成され、以後直前までの合成結果に対してさらに次の合成が繰り返されてゆき、最終的な合成結果として得られた一枚の静止画を得る。従って、着せ替えはベースサーフェスと一体化したように振る舞うことになる。</p>
						<p>対して着せ替えでない通常のアニメーションは、動画的表現であるので、前二者とは流れが大きく異なる。アニメーションの各pattern定義は、あくまでもアニメーションを構成する各コマの定義であり、それぞれ独立している。各pattern定義はベースサーフェスと新たな画像の二つを合成して新たなコマを作り出すので、前のpattern定義（前のコマ）での合成結果は次のコマには影響しない。そうして次々と新しいコマを描画することで、動画的な表現が実現される。</p>
						<p>しかしながらいずれの場合も、合成系メソッドは「元の画像」と「新たな画像」の二つ画像を合成する機能を担う点は共通している。そこでukadocでは、便宜上描画メソッドの説明において、<em>「元の画像」</em>を<em class="term">ベースレイヤ</em>、後者の<em>「新たな画像」</em>を<em class="term">新規レイヤ</em>と呼ぶことにする。</p>
						<p>この二語を用いて言い換えると、アニメーションの各pattern定義は、ベースサーフェスをベースレイヤとして新規レイヤを合成することでコマを作り出すものである。対して着せ替え及びelement合成は、直前までの合成結果をベースレイヤとして新規レイヤを合成してゆく繰り返しの結果として、一枚の静止画を得るものである。</p>
					</section>
					<section>
						<h1>描画メソッドと透過色</h1>
						<p>画像の左上隅1ピクセルの色が透過色として扱われ、実際の表示上は同色の部分が透過されるのは、pattern定義に使われるsurfaceや、element定義に使われる画像についても同様である。</p>
						<p>この時合成される各画像の透過色のRGB値は、特に統一されている必要はない。</p>
						<p>なお各描画メソッドは、透過色の扱いについてそれぞれ特徴があるため、各項目を参照されたい。</p>
					</section>
					<section>
						<h1>ベースレイヤと新規レイヤのずれ・重なり</h1>
						<p>（画像サイズまたは位置の関係で）ベースレイヤの外側の領域に新規レイヤを合成した場合の挙動は、ベースウェアの実装に委ねられている。</p>
						<p>MATERIAではベースレイヤの外にはみ出た部分は単に表示されない。</p>
						<p>CROWではベースレイヤの外にはみ出るような合成を行うと、正しく描画されなくなる。</p>
						<p>SSPにおいてはベースレイヤの外にはみ出るような新規レイヤの合成が許されており、<em>新規レイヤがはみ出なくなるだけベースレイヤに全透明領域が補われる</em>ような挙動となる。</p>
						<p>また逆に新規レイヤの外側の領域は、<em>全透明領域とは異なる空の領域</em>であり、合成に際して<em>何も起こらず、ベースレイヤの内容がそのまま残る</em>。この事は、特に新規レイヤの全透明領域が合成結果に影響するreplaceメソッドおよびreduceメソッドを理解する上で注意すべき前提である。</p>
					</section>
				</section>
				<dl id="base">
					<dt class="entry">base</dt>
					<dd class="entry">
						<p>
							<a href="#caption_basesurface">ベースサーフェス</a>を<em class="term">新規レイヤ</em>で完全に置き換える。collisionもコマのサーフェスに定義されたものに更新される。
							<br>このメソッドのパターンを重ねると、サーフェス全面を描画し直すことによるアニメーション（いわばパラパラ漫画）が実現される。
							<br>この描画メソッドが指定されたpattern定義では、XY座標は無視される。
							<br>着せ替えおよびelementでは、baseメソッドは最初（element0、pattern0）にしか用いることができない。それ以外はoverlayに読み変えられる。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="overlay">
					<dt class="entry">overlay</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>に<em class="term">新規レイヤ</em>を単に重ねる。
							<br>着せ替え・elementでも使用できる（着せ替えの場合、<a href="#add">add</a>、<a href="#_2_bind">bind</a>も同じ効果となる）。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="overlayfast">
					<dt class="entry">overlayfast</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>の不透明度に応じて、<em class="term">新規レイヤ</em>を重ねる。
							<br><em class="term">ベースレイヤ</em>の半透明部分では、透明度が低い部分ほど濃く<em class="term">新規レイヤ</em>を合成し、不透明であれば完全に合成し、全透明であれば一切合成しない。
							<br><a href="#interpolate">interpolate</a>メソッドの対になるメソッド。
							<br>着せ替え・elementでも使用できる。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="overlaymultiply">
					<dt class="entry">overlaymultiply</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>の不透明度に応じて、<em class="term">新規レイヤ</em>を乗算合成で重ねる。
							<br>挙動はoverlayfastと同様で外形は変わらないが、上書きの代わりに現在のサーフェスに対して乗算合成処理を行う。
							<br>着せ替え・elementでも使用できる。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /> 2.5.91</li>
						</ul>
					</dd>
				</dl>
				<dl id="replace">
					<dt class="entry">replace</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>の一部を<em class="term">新規レイヤ</em>で置き換える。
							<br>透過色部分や、透明度情報があり半透明になっている部分についても、<em class="term">ベースレイヤ</em>の情報を残さずに上書きする。
							<br>なお<em class="term">新規レイヤ</em>の範囲外は、あくまで空の領域であって透明度１００％の領域としては扱われない。この領域では何も合成が行われず、<em class="term">ベースレイヤ</em>の描画が単にそのまま残る。
							<br>着せ替え・elementでも使用できる。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="interpolate">
					<dt class="entry">interpolate</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>の透明度に応じて<em class="term">新規レイヤ</em>を重ねる。
							<br><em class="term">ベースレイヤ</em>の半透明部分では、透明度が高い部分ほど濃く<em class="term">新規レイヤ</em>を合成し、全透明であれば完全に合成し、不透明であれば一切合成しない。
							<br><a href="#overlayfast">overlayfast</a>メソッドの対になるメソッド。
							<br>着せ替え・elementでも使用できる。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="asis">
					<dt class="entry">asis</dt>
					<dd class="entry">
						<p>
							<a href="#overlay">overlay</a>に近いが、<em class="term">新規レイヤ</em>の透過（透過色および、pna・または<a href="descript_shell.html#seriko.use_self_alpha,数値">seliko.use_self_alpha</a>が設定されている場合は画像自体のアルファチャンネル）を無視して重ねる。
							<br>着せ替え・elementでも使用できる。
							<br>なおelement合成されたサーフェスを他のサーフェスのアニメーションパーツとしてasisメソッドで合成した場合の表示は未定義であるが、Windows上では普通、透過領域は画像本来の透過色に関係なく黒（#000000）で表示されるだろう。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="move">
					<dt class="entry">move</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>の表示位置を、元の表示位置から指定座標分ずらす。
							<br>moveによる表示位置の変更は瞬間的なもので、連続的な移動ではない。
							<br>x軸方向は右側が正、y軸方向は下側が正である。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスIDは無視される。
							<br>着せ替え・elementでは使用不可。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
							<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="_2_bind">
					<dt class="entry">bind</dt>
					<dd class="entry">
						<p>
							<em class="term">新規レイヤ</em>を着せ替えパーツとする。
							<br>着せ替えパーツとして単純に一つのサーフェスを重ねることしか出来なかった頃の唯一のメソッドで、現在はaddが互換。
							<br>処理の内容は<a href="#overlay">overlay</a>と同義。
							<br>着せ替えでないアニメーション・elementでの使用は未定義。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="add">
					<dt class="entry">add</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>に<em class="term">新規レイヤ</em>を着せ替えパーツとして重ねる。
							<br>処理の内容は<a href="#overlay">overlay</a>と同義。
							<br>着せ替えでないアニメーション・elementでの使用は未定義。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="reduce">
					<dt class="entry">reduce</dt>
					<dd class="entry">
						<p>
							<em class="term">ベースレイヤ</em>と<em class="term">新規レイヤ</em>の透過の合成。
							<br><em class="term">ベースレイヤ</em>と<em class="term">新規レイヤ</em>の<em>不透明度</em>が乗算される（有効な透過色は不透明度0%の領域として扱われる）。
							<br>例えば<em class="term">ベースレイヤ</em>が不透明度40%・<em class="term">新規レイヤ</em>が不透明度60%の領域は、合成後は不透明度24%＝透明度76%の領域となる。
							<br>透明度以外の情報（RGB値）は単に無視される。
							<br>なお<em class="term">新規レイヤ</em>の範囲外は、あくまで空の領域であって透明度１００％の領域としては扱われない。この領域では何も合成が行われず、<em class="term">ベースレイヤ</em>の描画が単にそのまま残る。
							<br>着せ替え用に用意されたメソッドだが、着せ替えでないアニメーション・elementでも使用可能。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="insert,ID">
					<dt class="entry">insert,ID</dt>
					<dd class="entry">
						<p>
							指定したID（animation*の*の番号）の着せ替えグループ（intervalがbindのアニメーション）をその位置に挿入する。
							<br>例えばある着せ替えAが、他の着せ替えBよりも部分的に前・部分的に後ろといった位置関係の構造を持つ場合に、着せ替えAの後ろになる部分のコマと前になる部分のコマとの間に着せ替えBをinsertで挿入する事によって、自然な前後関係の表示が実現される。この時、<em>着せ替えBの表示・非表示の状態に関わらず表示の完全性が維持される</em>。
							<br>insert先でのinsert（入れ子）も可能。
							<br>着せ替え用に用意されたメソッドで、着せ替えでないアニメーション・elementでの使用は未定義。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="start,ID">
					<dt class="entry">start,ID</dt>
					<dd class="entry">
						<p>
							指定したID（animation*の*の番号）のアニメーションを再生させる。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスID、ウェイト、XY座標は無視される。
							<br>着せ替え・elementでの使用不可。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="stop,ID">
					<dt class="entry">stop,ID</dt>
					<dd class="entry">
						<p>
							指定したID（animation*の*の数字）のアニメーションを停止させる。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスID、ウェイト、XY座標は無視される。
							<br>着せ替え・elementでの使用不可。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="alternativestart,_ID1,ID2..._">
					<dt class="entry">alternativestart,(ID1,ID2...)</dt>
					<dd class="entry">
						<p>
							指定した複数のID（animation*の*の数字）の内どれかのアニメーションを再生させる。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスID、ウェイト、XY座標は無視される。
							<br>SSPの場合括弧が[]、区切りが「,」でなく「.」でも読み込まれる。
							<br>着せ替え・elementでの使用不可。
							<br><a href="#caption_seriko-redefine">旧定義</a>：alternativestart,[ID1,ID2...]
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="alternativestop,_ID1,ID2..._">
					<dt class="entry">alternativestop,(ID1,ID2...)</dt>
					<dd class="entry">
						<p>
							指定した複数のID（animation*の*の数字）の内どれかのアニメーションを停止させる。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスID、ウェイト、XY座標は無視される。
							<br>SSPの場合括弧が[]、区切りが「,」でなく「.」でも読み込まれる。
							<br>着せ替え・elementでの使用不可。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="parallelstart,_ID1,ID2..._">
					<dt class="entry">parallelstart,(ID1,ID2...)</dt>
					<dd class="entry">
						<p>
							指定した複数のID（animation*の*の数字）のすべてのアニメーションを再生させる。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスID、ウェイト、XY座標は無視される。
							<br>SSPの場合括弧が[]、区切りが「,」でなく「.」でも読み込まれる。
							<br>着せ替え・elementでの使用不可。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="parallelstop,_ID1,ID2..._">
					<dt class="entry">parallelstop,(ID1,ID2...)</dt>
					<dd class="entry">
						<p>
							指定した複数のID（animation*の*の数字）のすべてのアニメーションを停止させる。
							<br>この描画メソッドが指定されたpattern定義では、サーフェスID、ウェイト、XY座標は無視される。
							<br>SSPの場合括弧が[]、区切りが「,」でなく「.」でも読み込まれる。
							<br>着せ替え・elementでの使用不可。
						</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
			</section>
		</section>
		<section class="category">
			<h1>surface.aliasブレス</h1>
			<section class="caption introduction" id="introduction_surface.aliasbrace">
				<h1>surface.aliasブレス記述例</h1>
<pre><code>sakura.surface.alias
{
素,[0]
照れ,[1,101,201]
驚き,[2]
}
</code></pre>
				<p>相方側の設定はkero.surface.alias、char*.surface.alias（char*はSSPのみ）と書き変える。</p>
			</section>
			<section class="caption" id="caption_aliastxt">
				<h1>alias.txt</h1>
				<p>aliasブレスは、MATERIA period453まではsurfaces.txtでなくalias.txtという専用のファイルに記述される仕様であった。</p>
				<p>現在では記述はsurfaces.txtに統合されているが、CROW・SSP共に互換性が保たれているため、別途alias.txtを用意する事も可能である。</p>
			</section>
			<dl id="*,_*_">
				<dt class="entry">*,[*]</dt>
				<dd class="entry">
					<p>サーフェスIDに対して任意のエイリアスIDを設定する。<br>例えば驚き,[2]とすれば、\s[驚き]で\s[2]と同じ意味となる。<br>また、1,[1,11,21]などとカンマ区切りで複数のサーフェスを指定することもでき、<br>この場合\s[1]で1,11,21からランダムで選ばれる。</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_m.png" alt="Materia" width="34" height="16" /></li>
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						<li><img src="image/icon_c.png" alt="CROW" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
		</section>
		<section class="category">
			<h1>cursorブレス</h1>
			<section class="caption introduction" id="introduction_cursorbrace">
				<h1>cursorブレス記述例</h1>
<pre><code>sakura.cursor
{
mouseup0,Head,system:hand
mousedown0,Head,system:finger

mouseup1,Bust,system:hand
mousedown1,Bust,system:grip
}
</code></pre>
				<p>相方側の設定はkero.cursor、char*.cursor</p>
			</section>
			<dl id="mouseup*,当たり判定ID,ファイル名">
				<dt class="entry">mouseup*,当たり判定ID,ファイル名</dt>
				<dd class="entry">
					<p>当たり判定の上に乗った時表示するカーソルファイルを設定。<br>*部分は同じスコープのmouseup定義で重複しない番号。<br>当り判定名はcollision定義で設定した名前。<br>ファイル名にはカーソルファイル名(cur/ani)を指定。ファイル名の変わりに、後述のシステムカーソル指定が使用可能。</p>
					<p class="default">system:finger（当たり判定名がbustの場合のみsystem:hand）</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="mousedown*,当たり判定ID,ファイル名">
				<dt class="entry">mousedown*,当たり判定ID,ファイル名</dt>
				<dd class="entry">
					<p>当たり判定の上でマウスボタンを押した時に表示するカーソルファイルを設定。<br>*部分は同じスコープのmousedown定義で重複しない番号。<br>当り判定名はcollision定義で設定した名前。<br>ファイル名にはカーソルファイル名(cur/ani)を指定。ファイル名の変わりに、後述のシステムカーソル指定が使用可能。</p>
					<p class="default">system:finger（当たり判定名がbustの場合のみsystem:grip）</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="mousewheel*,当たり判定ID,ファイル名">
				<dt class="entry">mousewheel*,当たり判定ID,ファイル名</dt>
				<dd class="entry">
					<p>当たり判定の上でマウスホイールを回した時に表示するカーソルファイルを設定。<br>*部分は同じスコープのmousewheel定義で重複しない番号。<br>当り判定名はcollision定義で設定した名前。<br>ファイル名にはカーソルファイル名(cur/ani)を指定。ファイル名の変わりに、後述のシステムカーソル指定が使用可能。</p>
					<p class="default">system:arrow</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<dl id="mousehover*,当たり判定ID,ファイル名">
				<dt class="entry">mousehover*,当たり判定ID,ファイル名</dt>
				<dd class="entry">
					<p>当たり判定の上でマウスをしばらく動かさない時に表示するカーソルファイルを設定。<br>*部分は同じスコープのmousehover定義で重複しない番号。<br>当り判定名はcollision定義で設定した名前。<br>ファイル名にはカーソルファイル名(cur/ani)を指定。ファイル名の変わりに、後述のシステムカーソル指定が使用可能。</p>
					<p class="default">system:arrow</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
			<section class="subcategory">
				<h1>システムカーソル</h1>
				<div class="caption">
					<p>カーソルファイルの変わりに指定すると現在使われているカーソルの変形が表示ができます。</p>
				</div>
				<dl id="system:arrow">
					<dt class="entry">system:arrow</dt>
					<dd class="entry">
						<p>矢印</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:cross">
					<dt class="entry">system:cross</dt>
					<dd class="entry">
						<p>十字</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:no">
					<dt class="entry">system:no</dt>
					<dd class="entry">
						<p>禁止</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:hand">
					<dt class="entry">system:hand</dt>
					<dd class="entry">
						<p>手</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:grip">
					<dt class="entry">system:grip</dt>
					<dd class="entry">
						<p>つかんだ手</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:finger">
					<dt class="entry">system:finger</dt>
					<dd class="entry">
						<p>指差し</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:wait">
					<dt class="entry">system:wait</dt>
					<dd class="entry">
						<p>時計</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:text">
					<dt class="entry">system:text</dt>
					<dd class="entry">
						<p>I</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:move">
					<dt class="entry">system:move</dt>
					<dd class="entry">
						<p>移動</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
				<dl id="system:help">
					<dt class="entry">system:help</dt>
					<dd class="entry">
						<p>？</p>
						<ul class="supported-baseware">
							<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
						</ul>
					</dd>
				</dl>
			</section>
		</section>
		<section class="category">
			<h1>tooltipブレス</h1>
			<section class="caption introduction" id="introduction_tooltipbrace">
				<h1>tooltipブレス記述例</h1>
<pre><code>sakura.tooltips
{
Bust,怒ります。
Head,つつかれると痛いです。
Shoulder,つつくとコミュニケートボックスを表示します。
}
</code></pre>
				<p>相方側の設定はkero.tooltips、char*.tooltips</p>
			</section>
			<dl id="当たり判定名,表示内容">
				<dt class="entry">当たり判定名,表示内容</dt>
				<dd class="entry">
					<p>当たり判定の上に来た時に表示するツールチップのテキストを設定。</p>
					<p class="default">挙動なし</p>
					<ul class="supported-baseware">
						<li><img src="image/icon_s.png" alt="SSP" width="34" height="16" /></li>
					</ul>
				</dd>
			</dl>
		</section>
	</div>
</body>
</html>
